(()=>{"use strict";var e,r={672:(e,r,t)=>{const o=Vue;var a={class:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg shadow h-full pt-4"},n={key:0,class:"h-6 flex mb-3 text-sm font-bold px-6"},s={key:1,class:"w-full border-t border-gray-200 dark:border-gray-700 rounded-b-lg flex justify-center py-3"},l=["href"];function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var c={key:0,class:"bg-gray-50 dark:bg-gray-800"},d=["id"],u={key:0};const g={name:"TableHeader",props:{fields:{type:Array},shouldShowColumnBorders:Boolean,hasViewColumn:Boolean}};var h=t(744);const p=(0,h.Z)(g,[["render",function(e,r,t,a,n,s){return t.fields&&t.fields.length>0?((0,o.openBlock)(),(0,o.createElementBlock)("thead",c,[(0,o.createElementVNode)("tr",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(t.fields,(function(e,r){var a;return(0,o.openBlock)(),(0,o.createElementBlock)("th",{key:r,id:e.id,class:(0,o.normalizeClass)([(a={},i(a,"".concat(e.class),!0),i(a,"border-r border-gray-200 dark:border-gray-600",t.shouldShowColumnBorders),a),"td-fit uppercase text-xxs text-gray-500 tracking-wide pl-5 pr-2 py-2"])},[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.data),1)],10,d)})),128)),t.hasViewColumn?((0,o.openBlock)(),(0,o.createElementBlock)("th",u)):(0,o.createCommentVNode)("",!0)])])):(0,o.createCommentVNode)("",!0)}]]);function b(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var m=["id","innerHTML"],f={key:0},k=["href"],v=[(0,o.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"24",height:"24",class:"inline-block",role:"presentation"},[(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)];const y={name:"TableRow",props:{row:{type:Object},tableStyle:String,shouldShowTight:Boolean,shouldShowColumnBorders:Boolean,hasViewColumn:Boolean}};function w(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var x={class:"rounded-b-lg font-bold flex items-center"},P={class:"flex text-sm"},C=["disabled"],B=["disabled"],N=["disabled","onClick","dusk"],E=["disabled"],V=["disabled"];const M={emits:["page"],props:{page:{type:Number,required:!0},pages:{type:Number,default:0},next:{type:Boolean,default:!1},previous:{type:Boolean,default:!1}},data:function(){return{linksDisabled:!1}},mounted:function(){Nova.$on("resources-loaded",this.listenToResourcesLoaded)},beforeUnmount:function(){Nova.$off("resources-loaded",this.listenToResourcesLoaded)},methods:{selectPage:function(e){this.page!=e&&(this.linksDisabled=!0,this.$emit("page",e))},selectPreviousPage:function(){this.selectPage(this.page-1)},selectNextPage:function(){this.selectPage(this.page+1)},listenToResourcesLoaded:function(){this.linksDisabled=!1}},computed:{hasPreviousPages:function(){return this.page>1},hasMorePages:function(){return this.page<this.pages},printPages:function(){for(var e=Math.min(Math.max(3,this.page),this.pages-2),r=Math.max(e-2,1),t=Math.min(e+2,this.pages),o=[],a=r;a<=t;++a)a>0&&o.push(a);return o}}},S={props:["card"],components:{TableRow:(0,h.Z)(y,[["render",function(e,r,t,a,n,s){return(0,o.openBlock)(),(0,o.createElementBlock)("tr",{class:(0,o.normalizeClass)([t.row.class,"group"])},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(t.row.columns,(function(e,r){var a;return(0,o.openBlock)(),(0,o.createElementBlock)("td",{key:r,id:e.id,innerHTML:e.data,class:(0,o.normalizeClass)([(a={},b(a,"".concat(e.class),!0),b(a,"px-6",!0),b(a,"py-4",!t.shouldShowTight),b(a,"border-r",t.shouldShowColumnBorders),b(a,"border-t border-gray-100 dark:border-gray-700",!0),b(a,"whitespace-nowrap",!0),a),"dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"])},null,10,m)})),128)),t.hasViewColumn?((0,o.openBlock)(),(0,o.createElementBlock)("td",{key:0,class:(0,o.normalizeClass)([{"px-6":!0,"py-4":!t.shouldShowTight,"border-r":t.shouldShowColumnBorders,"border-t border-gray-100 dark:border-gray-700":!0,"whitespace-nowrap":!0},"dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"])},[t.row.view?((0,o.openBlock)(),(0,o.createElementBlock)("span",f,[(0,o.createElementVNode)("a",{href:t.row.view,class:"cursor-pointer text-70 hover:text-primary mr-3"},v,8,k)])):(0,o.createCommentVNode)("",!0)],2)):(0,o.createCommentVNode)("",!0)],2)}]]),TableHeader:p,PaginationLinks:(0,h.Z)(M,[["render",function(e,r,t,a,n,s){return(0,o.openBlock)(),(0,o.createElementBlock)("nav",x,[(0,o.createElementVNode)("div",P,[(0,o.createElementVNode)("button",{disabled:!s.hasPreviousPages||e.linksDisabled,class:(0,o.normalizeClass)(["border-r border-gray-200 dark:border-gray-700 text-xl h-9 min-w-9 px-2 rounded-bl-lg focus:outline-none focus:bg-gray-50 hover:bg-gray-50 dark:hover:bg-gray-700",w({"text-gray-500":s.hasPreviousPages},"text-gray-500",!s.hasPreviousPages||e.linksDisabled)]),rel:"first",onClick:r[0]||(r[0]=(0,o.withModifiers)((function(e){return s.selectPage(1)}),["prevent"])),dusk:"first"}," « ",10,C),(0,o.createElementVNode)("button",{disabled:!s.hasPreviousPages||e.linksDisabled,class:(0,o.normalizeClass)(["border-r border-gray-200 dark:border-gray-700 text-xl h-9 min-w-9 px-2 focus:outline-none focus:bg-gray-50 hover:bg-gray-50 dark:hover:bg-gray-700",w({"text-gray-500":s.hasPreviousPages},"text-gray-500",!s.hasPreviousPages||e.linksDisabled)]),rel:"prev",onClick:r[1]||(r[1]=(0,o.withModifiers)((function(e){return s.selectPreviousPage()}),["prevent"])),dusk:"previous"}," ‹ ",10,B),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(s.printPages,(function(r){return(0,o.openBlock)(),(0,o.createElementBlock)("button",{disabled:e.linksDisabled,key:r,class:(0,o.normalizeClass)(["border-r border-gray-200 dark:border-gray-700 h-9 min-w-9 px-2 focus:outline-none focus:bg-gray-50 hover:bg-gray-50 dark:hover:bg-gray-700",{"text-gray-500":t.page!==r,"text-gray-500 bg-gray-50 dark:bg-gray-700":t.page===r}]),onClick:(0,o.withModifiers)((function(e){return s.selectPage(r)}),["prevent"]),dusk:"page:".concat(r)},(0,o.toDisplayString)(r),11,N)})),128)),(0,o.createElementVNode)("button",{disabled:!s.hasMorePages||e.linksDisabled,class:(0,o.normalizeClass)(["border-r border-gray-200 dark:border-gray-700 text-xl h-9 min-w-9 px-2 focus:outline-none focus:bg-gray-50 hover:bg-gray-50 dark:hover:bg-gray-700",w({"text-gray-500":s.hasMorePages},"text-gray-500",!s.hasMorePages||e.linksDisabled)]),rel:"next",onClick:r[2]||(r[2]=(0,o.withModifiers)((function(e){return s.selectNextPage()}),["prevent"])),dusk:"next"}," › ",10,E),(0,o.createElementVNode)("button",{disabled:!s.hasMorePages||e.linksDisabled,class:(0,o.normalizeClass)(["border-r border-gray-200 dark:border-gray-700 text-xl h-9 min-w-9 px-2 focus:outline-none focus:bg-gray-50 hover:bg-gray-50 dark:hover:bg-gray-700",w({"text-gray-500":s.hasMorePages},"text-gray-500",!s.hasMorePages||e.linksDisabled)]),rel:"last",onClick:r[3]||(r[3]=(0,o.withModifiers)((function(e){return s.selectPage(t.pages)}),["prevent"])),dusk:"last"}," » ",10,V)]),(0,o.renderSlot)(e.$slots,"default")])}]])},data:function(){return{rows:[],header:[],title:"",viewAll:!1,paginator:{},perPage:0,currentPage:1,allMatchingResourceCount:0}},computed:{hasViewColumn:function(){return this.rows.find((function(e){return e.view}))},shouldShowTight:function(){return"table-tight"===this.card.style},shouldShowColumnBorders:function(){return!!this.card.showBorders},resourceCountLabel:function(){var e=this.perPage*(this.currentPage-1);return this.paginator.data.length&&"".concat(e+1,"-").concat(e+this.paginator.data.length," ").concat(this.__("of")," ").concat(this.allMatchingResourceCount)},totalPages:function(){return Math.ceil(this.allMatchingResourceCount/this.perPage)},hasNextPage:function(){return this.paginator&&this.paginator.next_page_url},hasPreviousPage:function(){return this.paginator&&this.paginator.prev_page_url},shouldShowPagination:function(){return this.paginator&&this.paginator.data&&this.paginator.data.length>0}},mounted:function(){console.log(this.card),this.fillTableData(this.card),void 0!==paginator&&(this.paginator=paginator,this.perPage=paginator.per_page,this.allMatchingResourceCount=paginator.total)},methods:{fillTableData:function(e){this.rows=e.rows,this.header=e.header,this.title=e.title,this.viewAll=e.viewAll},selectPage:function(e){this.currentPage=e,this.loadMore()},loadMore:function(){var e=this;Nova.request().get("/nova-vendor/custom-table".concat(this.config.routes[0].url),{params:{page:this.currentPage}}).then((function(r){e.paginator=r.data.paginator,e.rows=r.data.rows,void 0!==e.paginator&&(e.perPage=e.paginator.per_page,e.allMatchingResourceCount=e.paginator.total),Nova.$emit("resources-loaded")})).catch((function(e){console.error(e)}))}},watch:{card:function(e){this.fillTableData(e)}}},D=(0,h.Z)(S,[["render",function(e,r,t,i,c,d){var u=(0,o.resolveComponent)("TableHeader"),g=(0,o.resolveComponent)("TableRow"),h=(0,o.resolveComponent)("pagination-links");return(0,o.openBlock)(),(0,o.createElementBlock)("div",a,[c.title?((0,o.openBlock)(),(0,o.createElementBlock)("h1",n,(0,o.toDisplayString)(c.title),1)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("table",{class:(0,o.normalizeClass)(["w-full",t.card.style]),"data-testid":"resource-table",ref:"table"},[(0,o.createVNode)(u,{fields:c.header,"should-show-column-borders":d.shouldShowColumnBorders,"has-view-column":d.hasViewColumn},null,8,["fields","should-show-column-borders","has-view-column"]),(0,o.createElementVNode)("tbody",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(c.rows,(function(e,r){return(0,o.openBlock)(),(0,o.createBlock)(g,{key:r,row:e,"should-show-tight":d.shouldShowTight,"should-show-column-borders":d.shouldShowColumnBorders,"has-view-column":d.hasViewColumn},null,8,["row","should-show-tight","should-show-column-borders","has-view-column"])})),128))])],2),c.viewAll&&c.viewAll.label?((0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("a",{class:"text-primary-200 text-xs hover:text-primary-600",href:c.viewAll.link},(0,o.toDisplayString)(c.viewAll.label),9,l)])])):(0,o.createCommentVNode)("",!0),c.paginator&&c.paginator.data>0?((0,o.openBlock)(),(0,o.createBlock)(h,{key:2,next:d.hasNextPage,page:c.currentPage,pages:d.totalPages,"per-page":c.perPage,previous:d.hasPreviousPage},{default:(0,o.withCtx)((function(){return[d.resourceCountLabel?((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:0,class:(0,o.normalizeClass)([{"ml-auto":"pagination-links"===e.paginationComponent},"text-sm text-80 px-4"])},(0,o.toDisplayString)(d.resourceCountLabel),3)):(0,o.createCommentVNode)("",!0)]})),_:1},8,["next","page","pages","per-page","previous"])):(0,o.createCommentVNode)("",!0)])}]]);Nova.booting((function(e,r){e.component("nova-custom-table-card",D)}))},962:()=>{},744:(e,r)=>{r.Z=(e,r)=>{const t=e.__vccOpts||e;for(const[e,o]of r)t[e]=o;return t}}},t={};function o(e){var a=t[e];if(void 0!==a)return a.exports;var n=t[e]={exports:{}};return r[e](n,n.exports,o),n.exports}o.m=r,e=[],o.O=(r,t,a,n)=>{if(!t){var s=1/0;for(d=0;d<e.length;d++){for(var[t,a,n]=e[d],l=!0,i=0;i<t.length;i++)(!1&n||s>=n)&&Object.keys(o.O).every((e=>o.O[e](t[i])))?t.splice(i--,1):(l=!1,n<s&&(s=n));if(l){e.splice(d--,1);var c=a();void 0!==c&&(r=c)}}return r}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[t,a,n]},o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={440:0,458:0};o.O.j=r=>0===e[r];var r=(r,t)=>{var a,n,[s,l,i]=t,c=0;if(s.some((r=>0!==e[r]))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(i)var d=i(o)}for(r&&r(t);c<s.length;c++)n=s[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(d)},t=self.webpackChunkm1davp_nova_custom_table_card=self.webpackChunkm1davp_nova_custom_table_card||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})(),o.O(void 0,[458],(()=>o(672)));var a=o.O(void 0,[458],(()=>o(962)));a=o.O(a)})();