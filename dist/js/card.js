(()=>{"use strict";var e,r={253:(e,r,t)=>{const a=Vue;var o={class:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg shadow h-full pt-4"},n={key:0,class:"h-6 flex mb-3 text-sm font-bold px-6"},l={key:1,class:"rounded-lg flex items-center justify-center absolute inset-0 z-30 pt-2"},i={key:0,class:"w-full border-t border-gray-200 dark:border-gray-700 rounded-b-lg flex justify-center py-3"},s=["href"],c={key:0,class:"text-sm text-80 px-4 ml-auto"};function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var u={key:0,class:"bg-gray-50 dark:bg-gray-800"},g=["id"],h={key:0};const p={name:"TableHeader",props:{fields:{type:Array},shouldShowColumnBorders:Boolean,hasViewColumn:Boolean}};var m=t(744);const b=(0,m.Z)(p,[["render",function(e,r,t,o,n,l){return t.fields&&t.fields.length>0?((0,a.openBlock)(),(0,a.createElementBlock)("thead",u,[(0,a.createElementVNode)("tr",null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.fields,(function(e,r){var o;return(0,a.openBlock)(),(0,a.createElementBlock)("th",{key:r,id:e.id,class:(0,a.normalizeClass)([(o={},d(o,"".concat(e.class),!0),d(o,"border-r border-gray-200 dark:border-gray-600",t.shouldShowColumnBorders),o),"td-fit uppercase text-xxs text-gray-500 tracking-wide pl-5 pr-2 py-2"])},[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.data),1)],10,g)})),128)),t.hasViewColumn?((0,a.openBlock)(),(0,a.createElementBlock)("th",h)):(0,a.createCommentVNode)("",!0)])])):(0,a.createCommentVNode)("",!0)}]]);function f(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var k=["id","innerHTML"],v={key:0},y=["href"],w=[(0,a.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"24",height:"24",class:"inline-block",role:"presentation"},[(0,a.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)];const x={name:"TableRow",props:{row:{type:Object},tableStyle:String,shouldShowTight:Boolean,shouldShowColumnBorders:Boolean,hasViewColumn:Boolean}},C=(0,m.Z)(x,[["render",function(e,r,t,o,n,l){return(0,a.openBlock)(),(0,a.createElementBlock)("tr",{class:(0,a.normalizeClass)([t.row.class,"group"])},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.row.columns,(function(e,r){var o;return(0,a.openBlock)(),(0,a.createElementBlock)("td",{key:r,id:e.id,innerHTML:e.data,class:(0,a.normalizeClass)([(o={},f(o,"".concat(e.class),!0),f(o,"px-6",!0),f(o,"py-4",!t.shouldShowTight),f(o,"border-r",t.shouldShowColumnBorders),f(o,"border-t border-gray-100 dark:border-gray-700",!0),f(o,"whitespace-nowrap",!0),o),"dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"])},null,10,k)})),128)),t.hasViewColumn?((0,a.openBlock)(),(0,a.createElementBlock)("td",{key:0,class:(0,a.normalizeClass)([{"px-6":!0,"py-4":!t.shouldShowTight,"border-r":t.shouldShowColumnBorders,"border-t border-gray-100 dark:border-gray-700":!0,"whitespace-nowrap":!0},"dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"])},[t.row.view?((0,a.openBlock)(),(0,a.createElementBlock)("span",v,[(0,a.createElementVNode)("a",{href:t.row.view,class:"cursor-pointer text-70 hover:text-primary mr-3"},w,8,y)])):(0,a.createCommentVNode)("",!0)],2)):(0,a.createCommentVNode)("",!0)],2)}]]);function P(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var B={class:"rounded-b-lg font-bold flex items-center"},N={class:"flex text-sm"},E=["disabled"],M=["disabled"],V=["disabled","onClick","dusk"],S=["disabled"],D=["disabled"];const L={emits:["page"],props:{page:{type:Number,required:!0},pages:{type:Number,default:0},next:{type:Boolean,default:!1},previous:{type:Boolean,default:!1}},data:function(){return{linksDisabled:!1}},mounted:function(){Nova.$on("resources-loaded",this.listenToResourcesLoaded)},beforeUnmount:function(){Nova.$off("resources-loaded",this.listenToResourcesLoaded)},methods:{selectPage:function(e){this.page!=e&&(this.linksDisabled=!0,this.$emit("page",e))},selectPreviousPage:function(){this.selectPage(this.page-1)},selectNextPage:function(){this.selectPage(this.page+1)},listenToResourcesLoaded:function(){this.linksDisabled=!1}},computed:{hasPreviousPages:function(){return this.page>1},hasMorePages:function(){return this.page<this.pages},printPages:function(){for(var e=Math.min(Math.max(3,this.page),this.pages-2),r=Math.max(e-2,1),t=Math.min(e+2,this.pages),a=[],o=r;o<=t;++o)o>0&&a.push(o);return a}}},_=(0,m.Z)(L,[["render",function(e,r,t,o,n,l){return(0,a.openBlock)(),(0,a.createElementBlock)("nav",B,[(0,a.createElementVNode)("div",N,[(0,a.createElementVNode)("button",{disabled:!l.hasPreviousPages||e.linksDisabled,class:(0,a.normalizeClass)(["border-r border-gray-200 dark:border-gray-700 text-xl h-9 min-w-9 px-2 rounded-bl-lg focus:outline-none focus:bg-gray-50 hover:bg-gray-50 dark:hover:bg-gray-700",P({"text-gray-500":l.hasPreviousPages},"text-gray-500",!l.hasPreviousPages||e.linksDisabled)]),rel:"first",onClick:r[0]||(r[0]=(0,a.withModifiers)((function(e){return l.selectPage(1)}),["prevent"])),dusk:"first"}," « ",10,E),(0,a.createElementVNode)("button",{disabled:!l.hasPreviousPages||e.linksDisabled,class:(0,a.normalizeClass)(["border-r border-gray-200 dark:border-gray-700 text-xl h-9 min-w-9 px-2 focus:outline-none focus:bg-gray-50 hover:bg-gray-50 dark:hover:bg-gray-700",P({"text-gray-500":l.hasPreviousPages},"text-gray-500",!l.hasPreviousPages||e.linksDisabled)]),rel:"prev",onClick:r[1]||(r[1]=(0,a.withModifiers)((function(e){return l.selectPreviousPage()}),["prevent"])),dusk:"previous"}," ‹ ",10,M),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l.printPages,(function(r){return(0,a.openBlock)(),(0,a.createElementBlock)("button",{disabled:e.linksDisabled,key:r,class:(0,a.normalizeClass)(["border-r border-gray-200 dark:border-gray-700 h-9 min-w-9 px-2 focus:outline-none focus:bg-gray-50 hover:bg-gray-50 dark:hover:bg-gray-700",{"text-gray-500":t.page!==r,"text-gray-500 bg-gray-50 dark:bg-gray-700":t.page===r}]),onClick:(0,a.withModifiers)((function(e){return l.selectPage(r)}),["prevent"]),dusk:"page:".concat(r)},(0,a.toDisplayString)(r),11,V)})),128)),(0,a.createElementVNode)("button",{disabled:!l.hasMorePages||e.linksDisabled,class:(0,a.normalizeClass)(["border-r border-gray-200 dark:border-gray-700 text-xl h-9 min-w-9 px-2 focus:outline-none focus:bg-gray-50 hover:bg-gray-50 dark:hover:bg-gray-700",P({"text-gray-500":l.hasMorePages},"text-gray-500",!l.hasMorePages||e.linksDisabled)]),rel:"next",onClick:r[2]||(r[2]=(0,a.withModifiers)((function(e){return l.selectNextPage()}),["prevent"])),dusk:"next"}," › ",10,S),(0,a.createElementVNode)("button",{disabled:!l.hasMorePages||e.linksDisabled,class:(0,a.normalizeClass)(["border-r border-gray-200 dark:border-gray-700 text-xl h-9 min-w-9 px-2 focus:outline-none focus:bg-gray-50 hover:bg-gray-50 dark:hover:bg-gray-700",P({"text-gray-500":l.hasMorePages},"text-gray-500",!l.hasMorePages||e.linksDisabled)]),rel:"last",onClick:r[3]||(r[3]=(0,a.withModifiers)((function(e){return l.selectPage(t.pages)}),["prevent"])),dusk:"last"}," » ",10,D)]),(0,a.renderSlot)(e.$slots,"default")])}]]);var T=["fill"],O=[(0,a.createStaticVNode)('<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',3)];const z={name:"Loader",props:{width:{type:[Number,String],required:!1,default:50},fillColor:{type:String,required:!1,default:"currentColor"}}},j={props:["card"],components:{TableRow:C,TableHeader:b,PaginationLinks:_,Loader:(0,m.Z)(z,[["render",function(e,r,t,o,n,l){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",{class:"mx-auto block",style:(0,a.normalizeStyle)({width:"".concat(t.width,"px")}),viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:t.fillColor},O,12,T)}]])},data:function(){return{rows:[],header:[],title:"",viewAll:!1,paginator:{},paginationUrl:"",perPage:0,currentPage:1,allMatchingResourceCount:0,isLoading:!1}},computed:{hasViewColumn:function(){return this.rows.find((function(e){return e.view}))},shouldShowTight:function(){return"table-tight"===this.card.style},shouldShowColumnBorders:function(){return!!this.card.showBorders},resourceCountLabel:function(){var e=this.perPage*(this.currentPage-1);return this.paginator.data.length&&"".concat(e+1,"-").concat(e+this.paginator.data.length," ").concat(this.__("of")," ").concat(this.allMatchingResourceCount)},totalPages:function(){return Math.ceil(this.allMatchingResourceCount/this.perPage)},hasNextPage:function(){return this.paginator&&this.paginator.next_page_url},hasPreviousPage:function(){return this.paginator&&this.paginator.prev_page_url},shouldShowPagination:function(){return this.paginator&&this.paginator.data&&this.paginator.data.length>0}},mounted:function(){this.fillTableData(this.card),this.card.paginator&&(this.paginator=this.card.paginator,this.perPage=this.card.paginator.per_page,this.allMatchingResourceCount=this.card.paginator.total),this.card.paginationUrl&&(this.paginationUrl=this.card.paginationUrl)},methods:{fillTableData:function(e){this.rows=e.rows,this.header=e.header,this.title=e.title,this.viewAll=e.viewAll},selectPage:function(e){this.loadMore(e)},loadMore:function(e){var r=this;this.isLoading=!0,Nova.request().get(this.paginationUrl,{params:{page:e,per_page:this.perPage}}).then((function(t){r.currentPage=e,r.paginator=t.data.paginator,r.rows=t.data.rows,r.paginator&&(r.perPage=r.paginator.per_page,r.allMatchingResourceCount=r.paginator.total)})).catch((function(e){Nova.error("Loading error: ".concat(e.message)),console.error(e)})).finally((function(){r.isLoading=!1,Nova.$emit("resources-loaded")}))}},watch:{card:function(e){this.fillTableData(e)}}},R=(0,m.Z)(j,[["render",function(e,r,t,d,u,g){var h=(0,a.resolveComponent)("loader"),p=(0,a.resolveComponent)("TableHeader"),m=(0,a.resolveComponent)("TableRow"),b=(0,a.resolveComponent)("pagination-links");return(0,a.openBlock)(),(0,a.createElementBlock)("div",o,[u.title?((0,a.openBlock)(),(0,a.createElementBlock)("h1",n,(0,a.toDisplayString)(u.title),1)):(0,a.createCommentVNode)("",!0),u.isLoading?((0,a.openBlock)(),(0,a.createElementBlock)("div",l,[(0,a.createVNode)(h,{class:"text-gray-300",width:"50"})])):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:2},[(0,a.createElementVNode)("table",{class:(0,a.normalizeClass)(["w-full",t.card.style]),"data-testid":"resource-table",ref:"table"},[(0,a.createVNode)(p,{fields:u.header,"should-show-column-borders":g.shouldShowColumnBorders,"has-view-column":g.hasViewColumn},null,8,["fields","should-show-column-borders","has-view-column"]),(0,a.createElementVNode)("tbody",null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(u.rows,(function(e,r){return(0,a.openBlock)(),(0,a.createBlock)(m,{key:r,row:e,"should-show-tight":g.shouldShowTight,"should-show-column-borders":g.shouldShowColumnBorders,"has-view-column":g.hasViewColumn},null,8,["row","should-show-tight","should-show-column-borders","has-view-column"])})),128))])],2),u.viewAll&&u.viewAll.label?((0,a.openBlock)(),(0,a.createElementBlock)("div",i,[(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("a",{class:"text-primary-200 text-xs hover:text-primary-600",href:u.viewAll.link},(0,a.toDisplayString)(u.viewAll.label),9,s)])])):(0,a.createCommentVNode)("",!0),u.paginator&&u.paginator.data&&u.paginator.data.length>0?((0,a.openBlock)(),(0,a.createBlock)(b,{key:1,ref:"pagination",next:g.hasNextPage,page:u.currentPage,pages:g.totalPages,"per-page":u.perPage,previous:g.hasPreviousPage,onPage:g.selectPage},{default:(0,a.withCtx)((function(){return[g.resourceCountLabel?((0,a.openBlock)(),(0,a.createElementBlock)("span",c,(0,a.toDisplayString)(g.resourceCountLabel),1)):(0,a.createCommentVNode)("",!0)]})),_:1},8,["next","page","pages","per-page","previous","onPage"])):(0,a.createCommentVNode)("",!0)],64))])}]]);Nova.booting((function(e,r){e.component("nova-custom-table-card",R)}))},962:()=>{},744:(e,r)=>{r.Z=(e,r)=>{const t=e.__vccOpts||e;for(const[e,a]of r)t[e]=a;return t}}},t={};function a(e){var o=t[e];if(void 0!==o)return o.exports;var n=t[e]={exports:{}};return r[e](n,n.exports,a),n.exports}a.m=r,e=[],a.O=(r,t,o,n)=>{if(!t){var l=1/0;for(d=0;d<e.length;d++){for(var[t,o,n]=e[d],i=!0,s=0;s<t.length;s++)(!1&n||l>=n)&&Object.keys(a.O).every((e=>a.O[e](t[s])))?t.splice(s--,1):(i=!1,n<l&&(l=n));if(i){e.splice(d--,1);var c=o();void 0!==c&&(r=c)}}return r}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[t,o,n]},a.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={440:0,458:0};a.O.j=r=>0===e[r];var r=(r,t)=>{var o,n,[l,i,s]=t,c=0;if(l.some((r=>0!==e[r]))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(s)var d=s(a)}for(r&&r(t);c<l.length;c++)n=l[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},t=self.webpackChunkm1davp_nova_custom_table_card=self.webpackChunkm1davp_nova_custom_table_card||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})(),a.O(void 0,[458],(()=>a(253)));var o=a.O(void 0,[458],(()=>a(962)));o=a.O(o)})();